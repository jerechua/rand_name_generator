from random import randint, random

from django.views.generic import TemplateView

letter_histogram = (('a', 8.167),
                   ('b', 1.492),
                   ('c', 2.782),
                   ('d', 4.253),
                   ('e', 12.70),
                   ('f', 2.228),
                   ('g', 2.015),
                   ('h', 6.094),
                   ('i', 6.966),
                   ('j', 0.153),
                   ('k', 0.772),
                   ('l', 4.025),
                   ('m', 2.406),
                   ('n', 6.749),
                   ('o', 7.507),
                   ('p', 1.929),
                   ('q', 0.095),
                   ('r', 5.987),
                   ('s', 6.327),
                   ('t', 9.056),
                   ('u', 2.758),
                   ('v', 0.978),
                   ('w', 2.360),
                   ('x', 0.150),
                   ('y', 1.974),
                   ('z', 0.074))

conditional_histogram = [[0.001215066828675577, 0.024301336573511544, 0.040097205346294046, 0.06318347509113001, 0.0, 0.014580801944106925, 0.02187120291616039, 0.006075334143377886, 0.04738760631834751, 0.001215066828675577, 0.014580801944106925, 0.0692588092345079, 0.031591737545565005, 0.21992709599027946, 0.001215066828675577, 0.024301336573511544, 0.001215066828675577, 0.0911300121506683, 0.11543134872417983, 0.12636695018226002, 0.010935601458080195, 0.024301336573511544, 0.015795868772782502, 0.001215066828675577, 0.031591737545565005, 0.001215066828675577],
 [0.07432432432432433, 0.006756756756756757, 0.0, 0.0, 0.31756756756756754, 0.0, 0.0, 0.0, 0.04054054054054054, 0.006756756756756757, 0.0, 0.11486486486486487, 0.0, 0.0, 0.12837837837837837, 0.0, 0.0, 0.07432432432432433, 0.013513513513513514, 0.006756756756756757, 0.14189189189189189, 0.0, 0.0, 0.0, 0.07432432432432433, 0.0],
 [0.13537117903930132, 0.0, 0.017467248908296942, 0.0, 0.16593886462882096, 0.0, 0.0, 0.16593886462882096, 0.043668122270742356, 0.0, 0.07860262008733625, 0.039301310043668124, 0.0, 0.0, 0.1965065502183406, 0.0, 0.004366812227074236, 0.048034934497816595, 0.004366812227074236, 0.06550218340611354, 0.03056768558951965, 0.0, 0.0, 0.0, 0.004366812227074236, 0.0],
 [0.100418410041841, 0.04184100418410042, 0.01882845188284519, 0.027196652719665274, 0.1192468619246862, 0.02301255230125523, 0.014644351464435146, 0.05230125523012552, 0.10460251046025104, 0.006276150627615063, 0.0020920502092050207, 0.02301255230125523, 0.029288702928870293, 0.03347280334728033, 0.08577405857740586, 0.012552301255230125, 0.0, 0.029288702928870293, 0.07322175732217573, 0.11715481171548117, 0.02092050209205021, 0.0041841004184100415, 0.0397489539748954, 0.0, 0.02092050209205021, 0.0],
 [0.0889248181083266, 0.018593371059013743, 0.03637833468067906, 0.10185933710590138, 0.038803556992724336, 0.024252223120452707, 0.012126111560226353, 0.02667744543249798, 0.033144704931285365, 0.002425222312045271, 0.004042037186742118, 0.0444624090541633, 0.03799514955537591, 0.08973322554567502, 0.02667744543249798, 0.02263540824575586, 0.0016168148746968471, 0.13662085691188358, 0.09296685529506872, 0.06709781729991916, 0.004850444624090542, 0.019401778496362168, 0.04042037186742118, 0.007275666936135812, 0.021018593371059015, 0.0],
 [0.11210762331838565, 0.008968609865470852, 0.013452914798206279, 0.008968609865470852, 0.08968609865470852, 0.04932735426008968, 0.004484304932735426, 0.03587443946188341, 0.1031390134529148, 0.004484304932735426, 0.0, 0.03587443946188341, 0.02242152466367713, 0.004484304932735426, 0.17937219730941703, 0.008968609865470852, 0.0, 0.07174887892376682, 0.02242152466367713, 0.16591928251121077, 0.03587443946188341, 0.0, 0.013452914798206279, 0.0, 0.008968609865470852, 0.0],
 [0.11538461538461539, 0.014423076923076924, 0.009615384615384616, 0.009615384615384616, 0.1346153846153846, 0.014423076923076924, 0.019230769230769232, 0.16826923076923078, 0.08653846153846154, 0.004807692307692308, 0.0, 0.03365384615384615, 0.014423076923076924, 0.019230769230769232, 0.11057692307692307, 0.004807692307692308, 0.0, 0.057692307692307696, 0.04326923076923077, 0.07692307692307693, 0.03365384615384615, 0.0, 0.02403846153846154, 0.0, 0.004807692307692308, 0.0],
 [0.17701863354037267, 0.003105590062111801, 0.003105590062111801, 0.0015527950310559005, 0.468944099378882, 0.003105590062111801, 0.0015527950310559005, 0.009316770186335404, 0.15062111801242237, 0.0, 0.0, 0.003105590062111801, 0.004658385093167702, 0.0015527950310559005, 0.07608695652173914, 0.0015527950310559005, 0.0, 0.012422360248447204, 0.007763975155279503, 0.049689440993788817, 0.012422360248447204, 0.0, 0.006211180124223602, 0.0, 0.006211180124223602, 0.0],
 [0.014792899408284023, 0.0073964497041420114, 0.047337278106508875, 0.04881656804733728, 0.034023668639053255, 0.02514792899408284, 0.03698224852071006, 0.008875739644970414, 0.0014792899408284023, 0.0014792899408284023, 0.011834319526627219, 0.05473372781065089, 0.05473372781065089, 0.26479289940828404, 0.03550295857988166, 0.008875739644970414, 0.0, 0.03994082840236687, 0.12721893491124261, 0.13757396449704143, 0.0014792899408284023, 0.020710059171597635, 0.010355029585798817, 0.0029585798816568047, 0.0, 0.0029585798816568047],
 [0.1111111111111111, 0.0, 0.0, 0.0, 0.1111111111111111, 0.0, 0.0, 0.0, 0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.4444444444444444, 0.0, 0.0, 0.0, 0.0, 0.0],
 [0.07058823529411765, 0.011764705882352941, 0.011764705882352941, 0.011764705882352941, 0.3411764705882353, 0.011764705882352941, 0.0, 0.023529411764705882, 0.16470588235294117, 0.0, 0.0, 0.023529411764705882, 0.011764705882352941, 0.10588235294117647, 0.047058823529411764, 0.0, 0.0, 0.0, 0.058823529411764705, 0.047058823529411764, 0.011764705882352941, 0.0, 0.023529411764705882, 0.0, 0.023529411764705882, 0.0],
 [0.10230179028132992, 0.0076726342710997444, 0.005115089514066497, 0.09207161125319693, 0.1636828644501279, 0.02557544757033248, 0.0025575447570332483, 0.010230179028132993, 0.12020460358056266, 0.0, 0.0076726342710997444, 0.1432225063938619, 0.010230179028132993, 0.005115089514066497, 0.10485933503836317, 0.0076726342710997444, 0.0, 0.005115089514066497, 0.028132992327365727, 0.03836317135549872, 0.020460358056265986, 0.0076726342710997444, 0.01278772378516624, 0.0, 0.0792838874680307, 0.0],
 [0.1746031746031746, 0.027777777777777776, 0.003968253968253968, 0.003968253968253968, 0.2698412698412698, 0.007936507936507936, 0.003968253968253968, 0.011904761904761904, 0.0992063492063492, 0.0, 0.0, 0.003968253968253968, 0.01984126984126984, 0.007936507936507936, 0.11507936507936507, 0.04365079365079365, 0.0, 0.011904761904761904, 0.03968253968253968, 0.03571428571428571, 0.031746031746031744, 0.0, 0.015873015873015872, 0.0, 0.07142857142857142, 0.0],
 [0.05673758865248227, 0.009929078014184398, 0.03546099290780142, 0.20709219858156028, 0.09361702127659574, 0.011347517730496455, 0.13049645390070921, 0.02269503546099291, 0.04680851063829787, 0.0028368794326241137, 0.011347517730496455, 0.01276595744680851, 0.009929078014184398, 0.011347517730496455, 0.0851063829787234, 0.005673758865248227, 0.0014184397163120568, 0.00425531914893617, 0.04680851063829787, 0.150354609929078, 0.00851063829787234, 0.0028368794326241137, 0.01702127659574468, 0.0, 0.015602836879432624, 0.0],
 [0.020860495436766623, 0.01564537157757497, 0.01694915254237288, 0.02346805736636245, 0.00651890482398957, 0.10430247718383312, 0.009126466753585397, 0.014341590612777053, 0.01564537157757497, 0.001303780964797914, 0.01694915254237288, 0.03389830508474576, 0.06258148631029987, 0.13820078226857888, 0.0469361147327249, 0.01955671447196871, 0.0, 0.10951760104302477, 0.03650586701434159, 0.07431551499348109, 0.14993481095176012, 0.01564537157757497, 0.05997392438070404, 0.0, 0.00651890482398957, 0.001303780964797914],
 [0.14465408805031446, 0.006289308176100629, 0.0, 0.0, 0.18867924528301888, 0.006289308176100629, 0.0, 0.018867924528301886, 0.07547169811320754, 0.0, 0.0, 0.09433962264150944, 0.006289308176100629, 0.0, 0.1320754716981132, 0.06289308176100629, 0.0, 0.11320754716981132, 0.031446540880503145, 0.06918238993710692, 0.03773584905660377, 0.0, 0.006289308176100629, 0.0, 0.006289308176100629, 0.0],
 [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 0.0, 0.0],
 [0.09074410163339383, 0.012704174228675136, 0.018148820326678767, 0.036297640653357534, 0.2413793103448276, 0.014519056261343012, 0.018148820326678767, 0.021778584392014518, 0.09074410163339383, 0.0018148820326678765, 0.014519056261343012, 0.018148820326678767, 0.025408348457350273, 0.029038112522686024, 0.0998185117967332, 0.010889292196007259, 0.0, 0.025408348457350273, 0.06715063520871144, 0.07622504537205081, 0.021778584392014518, 0.007259528130671506, 0.019963702359346643, 0.0, 0.038112522686025406, 0.0],
 [0.10841423948220065, 0.01779935275080906, 0.02750809061488673, 0.011326860841423949, 0.11974110032362459, 0.01779935275080906, 0.006472491909385114, 0.08090614886731391, 0.07928802588996764, 0.003236245954692557, 0.009708737864077669, 0.021035598705501618, 0.019417475728155338, 0.016181229773462782, 0.09223300970873786, 0.032362459546925564, 0.003236245954692557, 0.006472491909385114, 0.06957928802588997, 0.17637540453074432, 0.032362459546925564, 0.003236245954692557, 0.038834951456310676, 0.0, 0.006472491909385114, 0.0],
 [0.0641304347826087, 0.010869565217391304, 0.011956521739130435, 0.007608695652173913, 0.08152173913043478, 0.009782608695652175, 0.003260869565217391, 0.358695652173913, 0.08260869565217391, 0.0010869565217391304, 0.002173913043478261, 0.01847826086956522, 0.011956521739130435, 0.007608695652173913, 0.125, 0.004347826086956522, 0.0, 0.030434782608695653, 0.03695652173913044, 0.06086956521739131, 0.01847826086956522, 0.0010869565217391304, 0.03369565217391304, 0.0, 0.017391304347826087, 0.0],
 [0.02413793103448276, 0.017241379310344827, 0.041379310344827586, 0.02413793103448276, 0.02413793103448276, 0.006896551724137931, 0.04827586206896552, 0.006896551724137931, 0.027586206896551724, 0.0, 0.0034482758620689655, 0.11724137931034483, 0.027586206896551724, 0.12413793103448276, 0.0034482758620689655, 0.05517241379310345, 0.0, 0.15172413793103448, 0.1206896551724138, 0.16551724137931034, 0.0, 0.0, 0.006896551724137931, 0.0, 0.0034482758620689655, 0.0],
 [0.05813953488372093, 0.0, 0.0, 0.0, 0.7558139534883721, 0.0, 0.0, 0.0, 0.12790697674418605, 0.0, 0.0, 0.0, 0.0, 0.0, 0.046511627906976744, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.011627906976744186, 0.0],
 [0.2619047619047619, 0.003968253968253968, 0.003968253968253968, 0.007936507936507936, 0.15476190476190477, 0.003968253968253968, 0.0, 0.1746031746031746, 0.15476190476190477, 0.0, 0.0, 0.007936507936507936, 0.003968253968253968, 0.047619047619047616, 0.11507936507936507, 0.0, 0.0, 0.011904761904761904, 0.015873015873015872, 0.015873015873015872, 0.003968253968253968, 0.0, 0.007936507936507936, 0.0, 0.003968253968253968, 0.0],
 [0.08333333333333333, 0.0, 0.16666666666666666, 0.0, 0.08333333333333333, 0.0, 0.0, 0.0, 0.16666666666666666, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.25, 0.0, 0.0, 0.0, 0.25, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0],
 [0.09230769230769231, 0.035897435897435895, 0.03076923076923077, 0.03076923076923077, 0.07179487179487179, 0.035897435897435895, 0.015384615384615385, 0.05128205128205128, 0.05641025641025641, 0.005128205128205128, 0.005128205128205128, 0.020512820512820513, 0.03076923076923077, 0.015384615384615385, 0.18461538461538463, 0.020512820512820513, 0.0, 0.015384615384615385, 0.09743589743589744, 0.10256410256410256, 0.005128205128205128, 0.005128205128205128, 0.06153846153846154, 0.0, 0.010256410256410256, 0.0],
 [0.2, 0.0, 0.0, 0.0, 0.6, 0.0, 0.0, 0.0, 0.2, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]]

class RandNameGeneratorView(TemplateView):
    template_name = "index.html"

    def generate_letter(self):
        dist_sum = random() * 100

        for letter_stat in letter_histogram:
            dist_sum -= letter_stat[1]
            if dist_sum < 0:
                return letter_stat[0]

    def generate_name(self, name_length):

        name = ""
        for i in range(name_length):
            name += self.generate_letter()

        return name

    def get_context_data(self):
        context = super(RandNameGeneratorView, self).get_context_data()
        context['random_name'] = self.generate_name(randint(4, 10))
        return context
